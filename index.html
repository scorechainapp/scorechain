<!DOCTYPE html>
<html lang="es">
<head>
ย ย <meta charset="utf-8" />
ย ย <meta name="viewport" content="width=device-width, initial-scale=1" />
ย ย <title>ScoreChain</title>
ย ย <link rel="preconnect" href="https://fonts.googleapis.com">
ย ย <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
ย ย <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
ย ย <link rel="icon" type="image/png" href="./assets/logos/scorechain.png">
ย ย <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"></script>
ย ย <style>
ย ย ย ย :root {
ย ย ย ย ย ย --bg: #0b0f1a;
ย ย ย ย ย ย --card: #0f1724;
ย ย ย ย ย ย --muted: #9aa4b2;
ย ย ย ย ย ย --accent: #00cfc1;
ย ย ย ย ย ย --accent-2: #ffce3d;
ย ย ย ย ย ย --danger: #ff4d4d;
ย ย ย ย ย ย --glass: rgba(255, 255, 255, 0.03);
ย ย ย ย ย ย --profit: #16c784;
ย ย ย ย ย ย --loss: #ea3943;
ย ย ย ย }

ย ย ย ย html, body {
ย ย ย ย ย ย height: 100%;
ย ย ย ย ย ย margin: 0;
ย ย ย ย ย ย background: var(--bg);
ย ย ย ย ย ย font-family: Inter, system-ui, Segoe UI, Roboto, Arial;
ย ย ย ย ย ย color: #e6eef8;
ย ย ย ย }

ย ย ย ย .wrap {
ย ย ย ย ย ย max-width: 980px;
ย ย ย ย ย ย margin: 28px auto;
ย ย ย ย ย ย padding: 18px;
ย ย ย ย }

ย ย ย ย .card {
ย ย ย ย ย ย background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
ย ย ย ย ย ย border-radius: 14px;
ย ย ย ย ย ย padding: 20px;
ย ย ย ย ย ย box-shadow: 0 10px 30px rgba(2, 6, 23, 0.6);
ย ย ย ย ย ย border: 1px solid rgba(255, 255, 255, 0.03);
ย ย ย ย }

ย ย ย ย .hdr {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย justify-content: space-between;
ย ย ย ย ย ย gap: 12px;
ย ย ย ย ย ย margin-bottom: 16px;
ย ย ย ย }

ย ย ย ย .brand {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย gap: 12px;
ย ย ย ย }

ย ย ย ย .brand img {
ย ย ย ย ย ย width: 44px;
ย ย ย ย ย ย height: 44px;
ย ย ย ย ย ย border-radius: 8px;
ย ย ย ย ย ย background: #000;
ย ย ย ย ย ย padding: 6px;
ย ย ย ย }

ย ย ย ย .brand .title {
ย ย ย ย ย ย font-size: 18px;
ย ย ย ย ย ย font-weight: 700;
ย ย ย ย }

ย ย ย ย .controls {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย gap: 10px;
ย ย ย ย ย ย align-items: center;
ย ย ย ย }
ย ย ย ย 
ย ย ย ย @media (max-width: 767px) {
ย ย ย ย ย ย .hdr {
ย ย ย ย ย ย ย ย flex-direction: column;
ย ย ย ย ย ย ย ย align-items: flex-start;
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย .lang-select {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย gap: 8px;
ย ย ย ย ย ย background: var(--glass);
ย ย ย ย ย ย padding: 6px 10px;
ย ย ย ย ย ย border-radius: 999px;
ย ย ย ย ย ย border: 1px solid rgba(255, 255, 255, 0.03);
ย ย ย ย }

ย ย ย ย .lang-select select {
ย ย ย ย ย ย background: transparent;
ย ย ย ย ย ย border: 0;
ย ย ย ย ย ย color: #e6eef8;
ย ย ย ย ย ย font-weight: 600;
ย ย ย ย ย ย outline: none;
ย ย ย ย }

ย ย ย ย .btn {
ย ย ย ย ย ย background: linear-gradient(180deg, var(--accent), #00b2a9);
ย ย ย ย ย ย color: #031018;
ย ย ย ย ย ย padding: 8px 12px;
ย ย ย ย ย ย border-radius: 10px;
ย ย ย ย ย ย border: 0;
ย ย ย ย ย ย font-weight: 700;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย transition: all 0.2s ease;
ย ย ย ย }

ย ย ย ย .btn:hover {
ย ย ย ย ย ย filter: brightness(1.2);
ย ย ย ย }

ย ย ย ย .btn.secondary {
ย ย ย ย ย ย background: linear-gradient(180deg, var(--accent-2), #ebb53b);
ย ย ย ย ย ย color: #081014;
ย ย ย ย }

ย ย ย ย .wallet-status {
ย ย ย ย ย ย font-size: 13px;
ย ย ย ย ย ย color: var(--muted);
ย ย ย ย ย ย margin-left: 8px;
ย ย ย ย }

ย ย ย ย .grid {
ย ย ย ย ย ย display: grid;
ย ย ย ย ย ย grid-template-columns: 1fr;
ย ย ย ย ย ย gap: 18px;
ย ย ย ย ย ย align-items: start;
ย ย ย ย }

ย ย ย ย @media (min-width: 768px) {
ย ย ย ย ย ย .grid {
ย ย ย ย ย ย ย ย grid-template-columns: 1fr 1fr;
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ย 
ย ย ย ย @media (min-width: 768px) {
ย ย ย ย ย ย .controls {
ย ย ย ย ย ย ย ย flex-direction: row;
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย .left {
ย ย ย ย ย ย min-height: 220px;
ย ย ย ย }

ย ย ย ย .score-box {
ย ย ย ย ย ย background: rgba(255, 255, 255, 0.02);
ย ย ย ย ย ย padding: 16px;
ย ย ย ย ย ย border-radius: 12px;
ย ย ย ย ย ย margin-bottom: 14px;
ย ย ย ย ย ย transition: all 0.4s ease;
ย ย ย ย }

ย ย ย ย .score-title {
ย ย ย ย ย ย font-size: 14px;
ย ย ย ย ย ย color: var(--muted);
ย ย ย ย ย ย margin-bottom: 6px;
ย ย ย ย }

ย ย ย ย .score-number {
ย ย ย ย ย ย font-weight: 800;
ย ย ย ย ย ย font-size: 32px;
ย ย ย ย ย ย letter-spacing: 0.6px;
ย ย ย ย ย ย transition: color 0.4s ease;
ย ย ย ย }

ย ย ย ย .score-bar {
ย ย ย ย ย ย height: 12px;
ย ย ย ย ย ย border-radius: 999px;
ย ย ย ย ย ย background: var(--muted);
ย ย ย ย ย ย margin-top: 12px;
ย ย ย ย ย ย box-shadow: 0 4px 12px rgba(2, 6, 23, 0.6);
ย ย ย ย ย ย transition: background-color 0.4s ease, width 0.4s ease;
ย ย ย ย }

ย ย ย ย .portfolio {
ย ย ย ย ย ย margin-top: 12px;
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย flex-direction: column;
ย ย ย ย ย ย gap: 10px;
ย ย ย ย }

ย ย ย ย .portfolio-item {
ย ย ย ย ย ย display: grid;
ย ย ย ย ย ย grid-template-columns: 1fr 1fr 1fr;
ย ย ย ย ย ย gap: 10px;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย padding: 10px;
ย ย ย ย ย ย border-radius: 10px;
ย ย ย ย ย ย background: rgba(255, 255, 255, 0.015);
ย ย ย ย ย ย border: 1px solid rgba(255, 255, 255, 0.02);
ย ย ย ย ย ย transition: transform 0.2s ease, box-shadow 0.2s ease;
ย ย ย ย }
ย ย ย ย 
ย ย ย ย .portfolio-item.header {
ย ย ย ย ย ย font-size: 12px;
ย ย ย ย ย ย color: var(--muted);
ย ย ย ย ย ย background: transparent;
ย ย ย ย ย ย border: 0;
ย ย ย ย ย ย padding-bottom: 0;
ย ย ย ย ย ย margin-bottom: -10px;
ย ย ย ย }
ย ย ย ย .portfolio-item.header .asset-info { font-weight: 600; }

ย ย ย ย .portfolio-item:hover {
ย ย ย ย ย ย transform: translateY(-2px);
ย ย ย ย ย ย box-shadow: 0 6px 20px rgba(2, 6, 23, 0.8);
ย ย ย ย }

ย ย ย ย .asset-info {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย gap: 10px;
ย ย ย ย ย ย align-items: center;
ย ย ย ย ย ย font-weight: 700;
ย ย ย ย }
ย ย ย ย .asset-info .name-symbol { display: flex; flex-direction: column; }
ย ย ย ย .asset-info .name-symbol .symbol { font-size: 12px; color: var(--muted); }


ย ย ย ย .asset-value {
ย ย ย ย ย ย text-align: right;
ย ย ย ย ย ย font-weight: 700;
ย ย ย ย }
ย ย ย ย .asset-value .amount { font-size: 12px; color: var(--muted); }

ย ย ย ย .asset-percent-risk {
ย ย ย ย ย ย text-align: right;
ย ย ย ย ย ย color: var(--muted);
ย ย ย ย ย ย font-weight: 700;
ย ย ย ย ย ย font-size: 12px;
ย ย ย ย }
ย ย ย ย .asset-percent-risk .profit-loss { font-size: 12px; }
ย ย ย ย .asset-percent-risk .profit { color: var(--profit); }
ย ย ย ย .asset-percent-risk .loss { color: var(--loss); }


ย ย ย ย .asset-info img {
ย ย ย ย ย ย width: 28px;
ย ย ย ย ย ย height: 28px;
ย ย ย ย ย ย border-radius: 6px;
ย ย ย ย }

ย ย ย ย .risk-low { color: var(--accent); }
ย ย ย ย .risk-moderate { color: var(--accent-2); }
ย ย ย ย .risk-high { color: var(--danger); }

ย ย ย ย .right {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย flex-direction: column;
ย ย ย ย ย ย gap: 18px;
ย ย ย ย }

ย ย ย ย .edu-item {
ย ย ย ย ย ย padding: 18px;
ย ย ย ย ย ย background: var(--glass);
ย ย ย ย ย ย border-radius: 12px;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย border: 1px solid rgba(255, 255, 255, 0.02);
ย ย ย ย ย ย transition: transform 0.2s ease, box-shadow 0.2s ease;
ย ย ย ย }

ย ย ย ย .edu-item:hover {
ย ย ย ย ย ย transform: translateY(-2px);
ย ย ย ย ย ย box-shadow: 0 6px 20px rgba(2, 6, 23, 0.8);
ย ย ย ย }

ย ย ย ย .edu-title {
ย ย ย ย ย ย font-size: 16px;
ย ย ย ย ย ย font-weight: 700;
ย ย ย ย ย ย margin-bottom: 6px;
ย ย ย ย }

ย ย ย ย .edu-desc {
ย ย ย ย ย ย font-size: 13px;
ย ย ย ย ย ย color: var(--muted);
ย ย ย ย }

ย ย ย ย .coingecko-msg {
ย ย ย ย ย ย margin-top: 12px;
ย ย ย ย ย ย font-size: 13px;
ย ย ย ย ย ย color: var(--muted);
ย ย ย ย }

ย ย ย ย .footer {
ย ย ย ย ย ย margin-top: 16px;
ย ย ย ย ย ย font-size: 13px;
ย ย ย ย ย ย color: var(--muted);
ย ย ย ย ย ย text-align: center;
ย ย ย ย }

ย ย ย ย #base-msg {
ย ย ย ย ย ย font-size: 13px;
ย ย ย ย ย ย color: var(--muted);
ย ย ย ย ย ย margin-top: 12px;
ย ย ย ย }
ย ย </style>
</head>
<body>
ย ย <div class="wrap">
ย ย ย ย <header class="hdr">
ย ย ย ย ย ย <div class="brand">
ย ย ย ย ย ย ย ย <img src="./assets/logos/scorechain.png" alt="ScoreChain logo" id="logo-img" />
ย ย ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย ย ย <div class="title" data-es="Score Financiero" data-en="Financial Score">Score Financiero</div>
ย ย ย ย ย ย ย ย ย ย <div style="font-size:12px;color:var(--muted)" id="small-sub" data-es="Tu guรญa en cripto" data-en="Your crypto guide">Tu guรญa en cripto</div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div class="controls">
ย ย ย ย ย ย ย ย <div class="lang-select" title="Change language">
ย ย ย ย ย ย ย ย ย ย <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-globe-2"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/><path d="M12 2a14.5 14.5 0 0 1 8.5 2.5c2.3 2.3 3.5 6.4 2 9.5a14.5 14.5 0 0 1-20 0c-1.5-3.1-.3-7.2 2-9.5A14.5 14.5 0 0 1 12 2z"/></svg>
ย ย ย ย ย ย ย ย ย ย <select id="lang-selector" aria-label="language">
ย ย ย ย ย ย ย ย ย ย ย ย <option value="es">Espaรฑol</option>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="en">English</option>
ย ย ย ย ย ย ย ย ย ย </select>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <div style="display:flex;align-items:center;gap:8px">
ย ย ย ย ย ย ย ย ย ย <button class="btn" id="connect-wallet" data-es="๐ Conectar Wallet" data-en="๐ Connect Wallet">๐ Conectar Wallet</button>
ย ย ย ย ย ย ย ย ย ย <button class="btn secondary" id="switch-base" data-es="โ๏ธ Cambiar a Base" data-en="โ๏ธ Switch to Base">โ๏ธ Cambiar a Base</button>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <div class="wallet-status" id="walletAddress" aria-live="polite"></div>
ย ย ย ย ย ย </div>
ย ย ย ย </header>

ย ย ย ย <div class="grid">
ย ย ย ย ย ย <div class="left">
ย ย ย ย ย ย ย ย <section class="card score">
ย ย ย ย ย ย ย ย ย ย <div class="score-box">
ย ย ย ย ย ย ย ย ย ย ย ย <div class="score-title" data-es="Score Financiero" data-en="Financial Score">Score Financiero</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="score-number" id="score-number">...</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="score-bar" id="score-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
ย ย ย ย ย ย ย ย ย ย ย ย <div style="margin-top:8px;font-size:13px;color:var(--muted)" id="score-desc" data-es="Conecta tu wallet para ver tu score." data-en="Connect your wallet to see your score.">Conecta tu wallet para ver tu score.</div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย ย ย <div class="score-box">
ย ย ย ย ย ย ย ย ย ย ย ย <div class="score-title" data-es="Tu Portafolio" data-en="Your Portfolio">Tu Portafolio</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="portfolio" id="portfolio">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="portfolio-item header">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="asset-info" data-es="Moneda" data-en="Coin">Moneda</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="asset-value" data-es="Valor de Mercado" data-en="Market Value">Valor de Mercado</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="asset-percent-risk" data-es="Riesgo / P&L" data-en="Risk / P&L">Riesgo / P&L</div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div id="portfolio-list">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <p id="portfolio-msg" style="text-align:center;color:var(--muted)">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span data-es="Conecta tu wallet para ver tu portafolio." data-en="Connect your wallet to see your portfolio.">Conecta tu wallet para ver tu portafolio.</span>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </p>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="coingecko-msg" id="cg-msg"></div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </section>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div class="right">
ย ย ย ย ย ย ย ย <section class="card">
ย ย ย ย ย ย ย ย ย ย <h2>
ย ย ย ย ย ย ย ย ย ย ย ย <span data-es="ยฟCรณmo se calcula mi score?" data-en="How is my score calculated?">ยฟCรณmo se calcula mi score?</span>
ย ย ย ย ย ย ย ย ย ย </h2>
ย ย ย ย ย ย ย ย ย ย <div class="edu-item">
ย ย ย ย ย ย ย ย ย ย ย ย <div class="edu-title" data-es="Diversificaciรณn" data-en="Diversification">Diversificaciรณn</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="edu-desc" data-es="Cuanto mรกs diversificado estรฉ tu portafolio, menor serรก tu riesgo." data-en="The more diversified your portfolio is, the lower your risk.">Cuanto mรกs diversificado estรฉ tu portafolio, menor serรก tu riesgo.</div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div class="edu-item">
ย ย ย ย ย ย ย ย ย ย ย ย <div class="edu-title" data-es="Volatilidad del Activo" data-en="Asset Volatility">Volatilidad del Activo</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="edu-desc" data-es="Activos muy volรกtiles (como monedas nuevas) aumentan tu puntaje de riesgo." data-en="Highly volatile assets (like new coins) increase your risk score.">Activos muy volรกtiles (como monedas nuevas) aumentan tu puntaje de riesgo.</div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div class="edu-item">
ย ย ย ย ย ย ย ย ย ย ย ย <div class="edu-title" data-es="Historial del Protocolo" data-en="Protocol History">Historial del Protocolo</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="edu-desc" data-es="Los protocolos con mรกs historia y auditorรญas se consideran menos riesgosos." data-en="Protocols with longer history and audits are considered less risky.">Los protocolos con mรกs historia y auditorรญas se consideran menos riesgosos.</div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </section>

ย ย ย ย ย ย ย ย <section class="card">
ย ย ย ย ย ย ย ย ย ย <h2>
ย ย ย ย ย ย ย ย ย ย ย ย <span data-es="Gestiona tu riesgo" data-en="Manage your risk">Gestiona tu riesgo</span>
ย ย ย ย ย ย ย ย ย ย </h2>
ย ย ย ย ย ย ย ย ย ย <div class="edu-item">
ย ย ย ย ย ย ย ย ย ย ย ย <div class="edu-title" data-es="Rebalancea tu portafolio" data-en="Rebalance your portfolio">Rebalancea tu portafolio</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="edu-desc" data-es="Diversifica aรฑadiendo activos estables o de baja volatilidad." data-en="Diversify by adding stable or low-volatility assets.">Diversifica aรฑadiendo activos estables o de baja volatilidad.</div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div class="edu-item">
ย ย ย ย ย ย ย ย ย ย ย ย <div class="edu-title" data-es="Asegura tus activos" data-en="Secure your assets">Asegura tus activos</div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="edu-desc" data-es="Utiliza carteras de hardware y activa la autenticaciรณn de dos factores." data-en="Use hardware wallets and enable two-factor authentication.">Utiliza carteras de hardware y activa la autenticaciรณn de dos factores.</div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </section>
ย ย ย ย ย ย </div>
ย ย ย ย </div>

ย ย ย ย <footer class="footer">
ย ย ย ย ย ย ยฉ <span id="year"></span> ScoreChain ยท <a href="privacy.html" style="color:var(--muted)">Privacy</a> ยท <a href="terms.html" style="color:var(--muted)">Terms</a>
ย ย ย ย </footer>
ย ย </div>
ย ย <script>
ย ย ย ย // ---------------------------
ย ย ย ย // CONFIG
ย ย ย ย // ---------------------------
ย ย ย ย const INFURA_API_KEY = '9fa8ada75524485e8b6075524e49c4f3';
ย ย ย ย const INFURA_URL = `https://base-mainnet.infura.io/v3/${INFURA_API_KEY}`;
ย ย ย ย
ย ย ย ย const TOKENS_ON_BASE = [
ย ย ย ย ย ย { id: 'weth', symbol: 'WETH', name: 'Wrapped Ether', address: '0x4200000000000000000000000000000000000006', decimals: 18, risk: 20 },
ย ย ย ย ย ย { id: 'usd-coin', symbol: 'USDC', name: 'USD Coin', address: '0x833589fCD6eDb6E08f4c7C32D4f767BfFD1Ca7B3', decimals: 6, risk: 5 },
ย ย ย ย ย ย { id: 'dai', symbol: 'DAI', name: 'Dai', address: '0x50c572591904a40875c7b39922572D8E09C2d4b9', decimals: 18, risk: 10 },
ย ย ย ย ย ย { id: 'aave', symbol: 'AAVE', name: 'Aave', address: '0x153A81c3c97D8618eB477A14a796850d99F44c1f', decimals: 18, risk: 60 },
ย ย ย ย ย ย { id: 'uniswap', symbol: 'UNI', name: 'Uniswap', address: '0x867825b154a1D8D27993a44d7324B35E170f3807', decimals: 18, risk: 55 },
ย ย ย ย ];
ย ย ย ย
ย ย ย ย const RISK_SCORES = {
ย ย ย ย ย ย 'weth': 20, 
ย ย ย ย ย ย 'usd-coin': 5, 
ย ย ย ย ย ย 'dai': 10,
ย ย ย ย ย ย 'aave': 60, 
ย ย ย ย ย ย 'uniswap': 55,
ย ย ย ย ย ย 'ethereum': 25, 
ย ย ย ย };
ย ย ย ย
ย ย ย ย const langSelector = document.getElementById('lang-selector');
ย ย ย ย const portfolioMsgEl = document.getElementById('portfolio-msg');
ย ย ย ย
ย ย ย ย function getLang() {
ย ย ย ย ย ย return langSelector?.value || 'es';
ย ย ย ย }
ย ย ย ย
ย ย ย ย function translateAll() {
ย ย ย ย ย ย document.querySelectorAll('[data-es]').forEach(el => {
ย ย ย ย ย ย ย ย el.textContent = el.getAttribute(`data-${getLang()}`);
ย ย ย ย ย ย });
ย ย ย ย ย ย updateCoinGeckoMsg();
ย ย ย ย ย ย updateRiskColors(); 
ย ย ย ย }
ย ย ย ย
ย ย ย ย document.getElementById('year').textContent = new Date().getFullYear();
ย ย ย ย
ย ย ย ย function fetchTokenData(coinId) {
ย ย ย ย ย ย return new Promise((resolve, reject) => {
ย ย ย ย ย ย ย ย const url = `https://api.coingecko.com/api/v3/coins/${coinId}?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false`;
ย ย ย ย ย ย ย ย fetch(url)
ย ย ย ย ย ย ย ย ย ย .then(res => {
ย ย ย ย ย ย ย ย ย ย ย ย if (!res.ok) throw new Error('CG error ' + res.status);
ย ย ย ย ย ย ย ย ย ย ย ย return res.json();
ย ย ย ย ย ย ย ย ย ย })
ย ย ย ย ย ย ย ย ย ย .then(data => {
ย ย ย ย ย ย ย ย ย ย ย ย resolve({
ย ย ย ย ย ย ย ย ย ย ย ย ย ย id: data.id,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย name: data.name,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย symbol: data.symbol,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย logo: data.image.small,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย currentPrice: data.market_data.current_price.usd,
ย ย ย ย ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ย ย ย })
ย ย ย ย ย ย ย ย ย ย .catch(err => {
ย ย ย ย ย ย ย ย ย ย ย ย console.error(`Error fetching data for ${coinId}`, err);
ย ย ย ย ย ย ย ย ย ย ย ย resolve(null);
ย ย ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย });
ย ย ย ย }
ย ย ย ย
ย ย ย ย function updateCoinGeckoMsg() {
ย ย ย ย ย ย const el = document.getElementById('cg-msg');
ย ย ย ย ย ย const lang = getLang();
ย ย ย ย ย ย const now = new Date();
ย ย ย ย ย ย const timeString = now.toLocaleTimeString();
ย ย ย ย
ย ย ย ย ย ย const texts = {
ย ย ย ย ย ย ย ย es: `Precios de CoinGecko a las ${timeString}.`,
ย ย ย ย ย ย ย ย en: `Prices from CoinGecko at ${timeString}.`
ย ย ย ย ย ย };
ย ย ย ย ย ย if (el) el.textContent = texts[lang];
ย ย ย ย }
ย ย ย ย
ย ย ย ย async function fetchPortfolioData(address) {
ย ย ย ย ย ย if (!address) {
ย ย ย ย ย ย ย ย console.error('No wallet address provided.');
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }
ย ย ย ย ย ย document.getElementById('portfolio-list').innerHTML = `<p style="text-align:center;color:var(--muted)">Cargando tu portafolio...</p>`;
ย ย ย ย
ย ย ย ย ย ย const provider = new ethers.providers.JsonRpcProvider(INFURA_URL);
ย ย ย ย ย ย 
ย ย ย ย ย ย let ethBalanceWei = await provider.getBalance(address);
ย ย ย ย ย ย const ethBalance = ethers.utils.formatEther(ethBalanceWei);
ย ย ย ย
ย ย ย ย ย ย const portfolioPromises = TOKENS_ON_BASE.map(async token => {
ย ย ย ย ย ย ย ย const contract = new ethers.Contract(token.address, ["function balanceOf(address) view returns (uint256)"], provider);
ย ย ย ย ย ย ย ย const balanceWei = await contract.balanceOf(address);
ย ย ย ย ย ย ย ย const balance = ethers.utils.formatUnits(balanceWei, token.decimals);
ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย if (parseFloat(balance) > 0) {
ย ย ย ย ย ย ย ย ย ย return { ...token, balance: parseFloat(balance) };
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย return null;
ย ย ย ย ย ย });
ย ย ย ย
ย ย ย ย ย ย let portfolioAssets = (await Promise.all(portfolioPromises)).filter(asset => asset !== null);
ย ย ย ย
ย ย ย ย ย ย if (parseFloat(ethBalance) > 0.001) {
ย ย ย ย ย ย ย ย portfolioAssets.unshift({
ย ย ย ย ย ย ย ย ย ย id: 'ethereum', 
ย ย ย ย ย ย ย ย ย ย symbol: 'ETH', 
ย ย ย ย ย ย ย ย ย ย name: 'Ethereum', 
ย ย ย ย ย ย ย ย ย ย balance: parseFloat(ethBalance),
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย }
ย ย ย ย
ย ย ย ย ย ย if (portfolioAssets.length === 0) {
ย ย ย ย ย ย ย ย document.getElementById('portfolio-list').innerHTML = `<p style="text-align:center;color:var(--muted)"><span data-es="No se encontraron activos en la red Base." data-en="No assets found on Base network.">No se encontraron activos en la red Base.</span></p>`;
ย ย ย ย ย ย ย ย updateRiskScore(0);
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }
ย ย ย ย
ย ย ย ย ย ย const tokenDataPromises = portfolioAssets.map(asset => fetchTokenData(asset.id));
ย ย ย ย ย ย const tokenDataResults = await Promise.all(tokenDataPromises);
ย ย ย ย
ย ย ย ย ย ย let totalValue = 0;
ย ย ย ย ย ย const updatedPortfolio = portfolioAssets.map(asset => {
ย ย ย ย ย ย ย ย const data = tokenDataResults.find(d => d && d.id === asset.id);
ย ย ย ย ย ย ย ย const currentPrice = data ? data.currentPrice : 0;
ย ย ย ย ย ย ย ย const logo = data ? data.logo : './assets/logos/default.png'; 
ย ย ย ย ย ย ย ย const value = asset.balance * currentPrice;
ย ย ย ย ย ย ย ย totalValue += value;
ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย const profitLoss = 0; 
ย ย ย ย ย ย ย ย return { ...asset, value, currentPrice, profitLoss, logo };
ย ย ย ย ย ย });
ย ย ย ย
ย ย ย ย ย ย const finalPortfolio = updatedPortfolio.map(asset => ({
ย ย ย ย ย ย ย ย ...asset,
ย ย ย ย ย ย ย ย allocation: totalValue > 0 ? asset.value / totalValue : 0,
ย ย ย ย ย ย ย ย risk: RISK_SCORES[asset.id] || 70 
ย ย ย ย ย ย }));
ย ย ย ย
ย ย ย ย ย ย let weightedRisk = 0;
ย ย ย ย ย ย if (totalValue > 0) {
ย ย ย ย ย ย ย ย weightedRisk = finalPortfolio.reduce((sum, asset) => sum + (asset.risk * asset.allocation), 0);
ย ย ย ย ย ย }
ย ย ย ย ย ย 
ย ย ย ย ย ย updateRiskScore(Math.round(weightedRisk));
ย ย ย ย ย ย renderPortfolio(finalPortfolio);
ย ย ย ย }
ย ย ย ย
ย ย ย ย function getRiskLevelClass(score) {
ย ย ย ย ย ย if (score < 40) return 'risk-low';
ย ย ย ย ย ย if (score <= 70) return 'risk-moderate';
ย ย ย ย ย ย return 'risk-high';
ย ย ย ย }
ย ย ย ย
ย ย ย ย function getRiskLevelDesc(score) {
ย ย ย ย ย ย const lang = getLang();
ย ย ย ย ย ย if (score < 40) return lang === 'es' ? 'Riesgo: Bajo' : 'Risk: Low';
ย ย ย ย ย ย if (score <= 70) return lang === 'es' ? 'Riesgo: Moderado' : 'Risk: Moderate';
ย ย ย ย ย ย return lang === 'es' ? 'Riesgo: Alto' : 'Risk: High';
ย ย ย ย }
ย ย ย ย
ย ย ย ย function updateRiskScore(score) {
ย ย ย ย ย ย const riskBar = document.getElementById('score-bar');
ย ย ย ย ย ย const scoreDesc = document.getElementById('score-desc');
ย ย ย ย ย ย const scoreNumber = document.getElementById('score-number');
ย ย ย ย ย ย const lang = getLang();
ย ย ย ย
ย ย ย ย ย ย scoreNumber.textContent = `${score} / 100`;
ย ย ย ย ย ย riskBar.style.width = `${score}%`;
ย ย ย ย
ย ย ย ย ย ย if (score < 40) {
ย ย ย ย ย ย ย ย riskBar.style.background = 'var(--accent)';
ย ย ย ย ย ย ย ย scoreDesc.textContent = lang === 'es' ? 'Portafolio de bajo riesgo' : 'Low-risk portfolio';
ย ย ย ย ย ย } else if (score <= 70) {
ย ย ย ย ย ย ย ย riskBar.style.background = 'var(--accent-2)';
ย ย ย ย ย ย ย ย scoreDesc.textContent = lang === 'es' ? 'Portafolio de riesgo moderado' : 'Moderate-risk portfolio';
ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย riskBar.style.background = 'var(--danger)';
ย ย ย ย ย ย ย ย scoreDesc.textContent = lang === 'es' ? 'Portafolio de alto riesgo' : 'High-risk portfolio';
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ย
ย ย ย ย function fmtPrice(n) {
ย ย ย ย ย ย if (n === null || n === undefined) return '-';
ย ย ย ย ย ย const price = parseFloat(n);
ย ย ย ย ย ย if (price >= 1) {
ย ย ย ย ย ย ย ย return '$' + price.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
ย ย ย ย ย ย }
ย ย ย ย ย ย return '$' + price.toPrecision(4);
ย ย ย ย }
ย ย ย ย
ย ย ย ย function fmtPercent(n) {
ย ย ย ย ย ย return `${(n * 100).toFixed(2)}%`;
ย ย ย ย }
ย ย ย ย
ย ย ย ย function renderPortfolio(portfolio) {
ย ย ย ย ย ย const portfolioListEl = document.getElementById('portfolio-list');
ย ย ย ย ย ย portfolioListEl.innerHTML = ''; 
ย ย ย ย ย ย document.querySelector('.portfolio-item.header').style.display = 'grid';
ย ย ย ย
ย ย ย ย ย ย portfolio.forEach(asset => {
ย ย ย ย ย ย ย ย const item = document.createElement('div');
ย ย ย ย ย ย ย ย item.className = 'portfolio-item';
ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย const pnlClass = ''; 
ย ย ย ย ย ย ย ย const pnlText = '';
ย ย ย ย ย ย ย ย const riskClass = getRiskLevelClass(asset.risk);
ย ย ย ย ย ย ย ย const riskText = getRiskLevelDesc(asset.risk);
ย ย ย ย
ย ย ย ย ย ย ย ย item.innerHTML = `
ย ย ย ย ย ย ย ย ย ย <div class="asset-info">
ย ย ย ย ย ย ย ย ย ย ย ย <img src="${asset.logo || './assets/logos/default.png'}" alt="${asset.symbol}">
ย ย ย ย ย ย ย ย ย ย ย ย <div class="name-symbol">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span class="asset-name">${asset.symbol.toUpperCase()}</span>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span class="symbol">${fmtPercent(asset.allocation)}</span>
ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div class="asset-value">
ย ย ย ย ย ย ย ย ย ย ย ย <span>${fmtPrice(asset.value)}</span>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="amount">${asset.balance.toFixed(4)} ${asset.symbol.toUpperCase()}</div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div class="asset-percent-risk">
ย ย ย ย ย ย ย ย ย ย ย ย <span class="${riskClass}">${riskText}</span>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="profit-loss ${pnlClass}">${pnlText}</div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย `;
ย ย ย ย ย ย ย ย portfolioListEl.appendChild(item);
ย ย ย ย ย ย });
ย ย ย ย }
ย ย ย ย
ย ย ย ย function updateRiskColors() {
ย ย ย ย ย ย const currentScore = parseInt(document.getElementById('score-number').textContent.split('/')[0].trim());
ย ย ย ย ย ย if (!isNaN(currentScore)) {
ย ย ย ย ย ย ย ย updateRiskScore(currentScore);
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ย
ย ย ย ย // ---------------------------
ย ย ย ย // WALLET / METAMASK
ย ย ย ย // ---------------------------
ย ย ย ย const walletDisplay = document.getElementById('walletAddress');
ย ย ย ย const connectBtn = document.getElementById('connect-wallet');
ย ย ย ย const switchBtn = document.getElementById('switch-base');
ย ย ย ย let currentAccount = null;
ย ย ย ย
ย ย ย ย function formatAddress(addr) {
ย ย ย ย ย ย if (!addr) return '';
ย ย ย ย ย ย return addr.slice(0, 6) + '...' + addr.slice(-4);
ย ย ย ย }
ย ย ย ย
ย ย ย ย async function connectWallet() {
ย ย ย ย ย ย if (typeof window.ethereum === 'undefined') {
ย ย ย ย ย ย ย ย alert(getLang() === 'es' ? 'MetaMask no estรก instalada.' : 'MetaMask is not installed.');
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }
ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
ย ย ย ย ย ย ย ย if (accounts && accounts.length > 0) {
ย ย ย ย ย ย ย ย ย ย currentAccount = accounts[0];
ย ย ย ย ย ย ย ย ย ย const short = formatAddress(currentAccount);
ย ย ย ย ย ย ย ย ย ย walletDisplay.textContent = (getLang() === 'es' ? 'โ Wallet conectada: ' : 'โ Wallet connected: ') + short;
ย ย ย ย ย ย ย ย ย ย connectBtn.textContent = getLang() === 'es' ? 'โ Conectada' : 'โ Connected';
ย ย ย ย ย ย ย ย ย ย fetchPortfolioData(currentAccount);
ย ย ย ย
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย } catch (err) {
ย ย ย ย ย ย ย ย console.error('Connect error', err);
ย ย ย ย ย ย ย ย walletDisplay.textContent = getLang() === 'es' ? 'โ Error al conectar.' : 'โ Connection error.';
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ย
ย ย ย ย const NETWORKS = {
ย ย ย ย ย ย base: {
ย ย ย ย ย ย ย ย chainId: '0x2105', 
ย ย ย ย ย ย ย ย chainName: 'Base Mainnet',
ย ย ย ย ย ย ย ย nativeCurrency: { name: 'ETH', symbol: 'ETH', decimals: 18 },
ย ย ย ย ย ย ย ย rpcUrls: ['https://mainnet.base.org'],
ย ย ย ย ย ย ย ย blockExplorerUrls: ['https://basescan.org'],
ย ย ย ย ย ย }
ย ย ย ย };
ย ย ย ย
ย ย ย ย async function switchToNetwork(networkKey) {
ย ย ย ย ย ย if (typeof window.ethereum === 'undefined') {
ย ย ย ย ย ย ย ย alert(getLang() === 'es' ? 'MetaMask no estรก instalada.' : 'MetaMask is not installed.');
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }
ย ย ย ย ย ย const net = NETWORKS[networkKey];
ย ย ย ย ย ย if (!net) {
ย ย ย ย ย ย ย ย console.error('Network not defined', networkKey);
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }
ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย await window.ethereum.request({ method: 'wallet_switchEthereumChain', params: [{ chainId: net.chainId }] });
ย ย ย ย ย ย } catch (err) {
ย ย ย ย ย ย ย ย if (err && err.code === 4902) {
ย ย ย ย ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย ย ย ย ย await window.ethereum.request({ method: 'wallet_addEthereumChain', params: [net] });
ย ย ย ย ย ย ย ย ย ย } catch (addErr) {
ย ย ย ย ย ย ย ย ย ย ย ย console.error('Add chain error', addErr);
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย console.error('Switch error', err);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ย
ย ย ย ย connectBtn.addEventListener('click', connectWallet);
ย ย ย ย switchBtn.addEventListener('click', () => switchToNetwork('base'));
ย ย ย ย
ย ย ย ย if (window.ethereum) {
ย ย ย ย ย ย window.ethereum.on && window.ethereum.on('accountsChanged', (accounts) => {
ย ย ย ย ย ย ย ย if (accounts && accounts.length) {
ย ย ย ย ย ย ย ย ย ย currentAccount = accounts[0];
ย ย ย ย ย ย ย ย ย ย walletDisplay.textContent = (getLang() === 'es' ? 'โ Wallet conectada: ' : 'โ Wallet connected: ') + formatAddress(currentAccount);
ย ย ย ย ย ย ย ย ย ย connectBtn.textContent = getLang() === 'es' ? 'โ Conectada' : 'โ Connected';
ย ย ย ย ย ย ย ย ย ย fetchPortfolioData(currentAccount);
ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย currentAccount = null;
ย ย ย ย ย ย ย ย ย ย walletDisplay.textContent = '';
ย ย ย ย ย ย ย ย ย ย connectBtn.textContent = getLang() === 'es' ? '๐ Conectar Wallet' : '๐ Connect Wallet';
ย ย ย ย ย ย ย ย ย ย document.getElementById('portfolio-list').innerHTML = `<p id="portfolio-msg" style="text-align:center;color:var(--muted)"><span data-es="Conecta tu wallet para ver tu portafolio." data-en="Connect your wallet to see your portfolio.">Conecta tu wallet para ver tu portafolio.</span></p>`;
ย ย ย ย ย ย ย ย ย ย updateRiskScore(0);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย });
ย ย ย ย ย ย window.ethereum.on && window.ethereum.on('chainChanged', (chainId) => {
ย ย ย ย ย ย ย ย if (currentAccount) {
ย ย ย ย ย ย ย ย ย ย fetchPortfolioData(currentAccount);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย });
ย ย ย ย }
ย ย ย ย
ย ย ย ย langSelector.addEventListener('change', () => {
ย ย ย ย ย ย translateAll();
ย ย ย ย });
ย ย ย ย
ย ย ย ย translateAll();
ย ย ย ย updateRiskScore(0);
ย ย </script>
</body>
</html>
